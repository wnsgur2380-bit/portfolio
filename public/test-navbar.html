<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navbar í…ŒìŠ¤íŠ¸ í˜ì´ì§€</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="/navbar-loader.js?v=3.0"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .test-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 100px 20px;
            background: #0d0d0d;
            color: #fff;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 10px;
        }
        .test-section h2 {
            color: #00d4ff;
            margin-top: 0;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            background: #0d0d0d;
            border-left: 3px solid #00d4ff;
            border-radius: 5px;
        }
        .pass {
            border-left-color: #00ff00;
        }
        .fail {
            border-left-color: #ff0000;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª Navbar í†µí•© í…ŒìŠ¤íŠ¸</h1>
        
        <div class="test-section">
            <h2>1. Navbar ìš”ì†Œ ì¡´ì¬ í™•ì¸</h2>
            <div id="test1" class="test-result">ë¡œë”© ì¤‘...</div>
        </div>
        
        <div class="test-section">
            <h2>2. ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸</h2>
            <div id="test2" class="test-result">ë¡œë”© ì¤‘...</div>
        </div>
        
        <div class="test-section">
            <h2>3. í•¨ìˆ˜ ì •ì˜ í™•ì¸</h2>
            <div id="test3" class="test-result">ë¡œë”© ì¤‘...</div>
        </div>
        
        <div class="test-section">
            <h2>4. ë“œë¡­ë‹¤ìš´ í† ê¸€ í…ŒìŠ¤íŠ¸</h2>
            <div id="test4" class="test-result">ë¡œë”© ì¤‘...</div>
            <button onclick="testDropdown()" style="padding: 10px 20px; background: #00d4ff; color: #000; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">ë“œë¡­ë‹¤ìš´ í† ê¸€ í…ŒìŠ¤íŠ¸</button>
        </div>
        
        <div class="test-section">
            <h2>5. ì•µì»¤ ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸</h2>
            <div id="test5" class="test-result">ë¡œë”© ì¤‘...</div>
            <button onclick="testAnchorNav()" style="padding: 10px 20px; background: #00d4ff; color: #000; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">ì•µì»¤ ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸</button>
        </div>
    </div>

    <script>
        // navbar ë¡œë“œ í›„ í…ŒìŠ¤íŠ¸ ì‹œì‘
        setTimeout(() => {
            runTests();
        }, 500);

        function runTests() {
            // Test 1: Navbar ìš”ì†Œ ì¡´ì¬ í™•ì¸
            const navbar = document.querySelector('nav.navbar');
            const authDropdown = document.getElementById('authDropdown');
            const loginItem = document.getElementById('loginItem');
            const signupItem = document.getElementById('signupItem');
            
            let test1HTML = '';
            if (navbar) {
                test1HTML += '<div class="pass">âœ“ navbar ìš”ì†Œ ì¡´ì¬</div>';
            } else {
                test1HTML += '<div class="fail">âœ— navbar ìš”ì†Œ ì—†ìŒ</div>';
            }
            if (authDropdown) {
                test1HTML += '<div class="pass">âœ“ authDropdown ìš”ì†Œ ì¡´ì¬</div>';
            } else {
                test1HTML += '<div class="fail">âœ— authDropdown ìš”ì†Œ ì—†ìŒ</div>';
            }
            if (loginItem && signupItem) {
                test1HTML += '<div class="pass">âœ“ loginItem, signupItem ìš”ì†Œ ì¡´ì¬</div>';
            } else {
                test1HTML += '<div class="fail">âœ— loginItem ë˜ëŠ” signupItem ìš”ì†Œ ì—†ìŒ</div>';
            }
            document.getElementById('test1').innerHTML = test1HTML;
            
            // Test 2: ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
            fetch('/api/status')
                .then(res => res.json())
                .then(data => {
                    let test2HTML = '';
                    test2HTML += `<div class="pass">âœ“ API ì‘ë‹µ: isLoggedIn=${data.isLoggedIn}</div>`;
                    
                    const isVisible = authDropdown && authDropdown.style.display !== 'none';
                    const shouldBeVisible = data.isLoggedIn;
                    
                    if (isVisible === shouldBeVisible) {
                        test2HTML += `<div class="pass">âœ“ ë“œë¡­ë‹¤ìš´ í‘œì‹œ ìƒíƒœ ì •í™•í•¨</div>`;
                    } else {
                        test2HTML += `<div class="fail">âœ— ë“œë¡­ë‹¤ìš´ í‘œì‹œ ìƒíƒœ ì˜¤ë¥˜ (í‘œì‹œì¤‘: ${isVisible}, ë¡œê·¸ì¸: ${shouldBeVisible})</div>`;
                    }
                    
                    const loginVisible = loginItem && loginItem.style.display !== 'none';
                    const signupVisible = signupItem && signupItem.style.display !== 'none';
                    if (loginVisible === !shouldBeVisible && signupVisible === !shouldBeVisible) {
                        test2HTML += `<div class="pass">âœ“ ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ í‘œì‹œ ìƒíƒœ ì •í™•í•¨</div>`;
                    } else {
                        test2HTML += `<div class="fail">âœ— ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ í‘œì‹œ ìƒíƒœ ì˜¤ë¥˜</div>`;
                    }
                    document.getElementById('test2').innerHTML = test2HTML;
                })
                .catch(err => {
                    document.getElementById('test2').innerHTML = `<div class="fail">âœ— API ì˜¤ë¥˜: ${err.message}</div>`;
                });
            
            // Test 3: í•¨ìˆ˜ ì •ì˜ í™•ì¸
            let test3HTML = '';
            if (typeof toggleDropdown === 'function') {
                test3HTML += '<div class="pass">âœ“ toggleDropdown í•¨ìˆ˜ ì •ì˜ë¨</div>';
            } else {
                test3HTML += '<div class="fail">âœ— toggleDropdown í•¨ìˆ˜ ì •ì˜ ì•ˆ ë¨</div>';
            }
            if (typeof logout === 'function') {
                test3HTML += '<div class="pass">âœ“ logout í•¨ìˆ˜ ì •ì˜ë¨</div>';
            } else {
                test3HTML += '<div class="fail">âœ— logout í•¨ìˆ˜ ì •ì˜ ì•ˆ ë¨</div>';
            }
            if (typeof handleAnchorNav === 'function') {
                test3HTML += '<div class="pass">âœ“ handleAnchorNav í•¨ìˆ˜ ì •ì˜ë¨</div>';
            } else {
                test3HTML += '<div class="fail">âœ— handleAnchorNav í•¨ìˆ˜ ì •ì˜ ì•ˆ ë¨</div>';
            }
            if (typeof updateNavigation === 'function') {
                test3HTML += '<div class="pass">âœ“ updateNavigation í•¨ìˆ˜ ì •ì˜ë¨</div>';
            } else {
                test3HTML += '<div class="fail">âœ— updateNavigation í•¨ìˆ˜ ì •ì˜ ì•ˆ ë¨</div>';
            }
            document.getElementById('test3').innerHTML = test3HTML;
            
            // Test 4: ë“œë¡­ë‹¤ìš´ ì¤€ë¹„
            document.getElementById('test4').innerHTML = '<div class="pass">âœ“ ìœ„ì˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë“œë¡­ë‹¤ìš´ì„ í† ê¸€í•´ë³´ì„¸ìš”</div>';
            
            // Test 5: ì•µì»¤ ë„¤ë¹„ê²Œì´ì…˜ ì¤€ë¹„
            document.getElementById('test5').innerHTML = '<div class="pass">âœ“ ìœ„ì˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì•µì»¤ ë„¤ë¹„ê²Œì´ì…˜ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”</div>';
        }

        function testDropdown() {
            const dropdownMenu = document.getElementById('dropdownMenu');
            if (!dropdownMenu) {
                alert('ë“œë¡­ë‹¤ìš´ ë©”ë‰´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            dropdownMenu.classList.toggle('show');
            alert(`ë“œë¡­ë‹¤ìš´ ë©”ë‰´ í† ê¸€ë¨ (í˜„ì¬ ìƒíƒœ: ${dropdownMenu.classList.contains('show') ? 'í‘œì‹œ' : 'ìˆ¨ê¹€'})`);
        }

        function testAnchorNav() {
            const currentPath = window.location.pathname;
            const targetSection = 'about';
            if (currentPath === '/') {
                alert('ì´ë¯¸ í™ˆí˜ì´ì§€ì…ë‹ˆë‹¤. ìê¸°ì†Œê°œ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.');
                const section = document.getElementById(targetSection);
                if (section) {
                    section.scrollIntoView({ behavior: 'smooth' });
                }
            } else {
                alert(`í™ˆí˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤: /#${targetSection}`);
                window.location.href = `/#${targetSection}`;
            }
        }
    </script>
</body>
</html>
