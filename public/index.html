<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Myworks - 포트폴리오</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="/navbar-loader.js?v=3.0"></script>
</head>
<body>
    <!-- Navigation is loaded by navbar-loader.js -->

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1 class="hero-title">안녕하세요</h1>
            <p class="hero-subtitle">사용자 경험을 중심으로 아이디어를 빠르고 정확하게 제품으로 완성하는 신입개발자입니다.<br><br>
            끊임없는 학습과 도전을 통해 프론트엔드부터 백엔드까지 전반적인 웹 개발 역량을 키워나가고 있으며, 
            실제 프로젝트 경험으로 더욱 성장하고 있습니다.</p>
            <a href="#portfolio" class="cta-button">포트폴리오 보기</a>
        </div>
        <div class="hero-decoration">
            <div class="circle circle-1"></div>
            <div class="circle circle-2"></div>
            <div class="circle circle-3"></div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about">
        <div class="container">
            <div class="section-header">
                <h2>자기소개</h2>
                <div class="underline"></div>
            </div>
            <div class="about-grid">
                <div class="about-content">
                    <p class="about-text">
                        사용자 경험을 중심으로 웹 개발을 학습하며 프론트엔드부터 백엔드까지 꾸준히 역량을 넓혀가고 있는 개발자입니다.<br><br>
                        지속적인 학습과 협업 경험을 바탕으로 팀과 함께 성장하며, 실제 서비스에 가치를 더하는 개발자로 성장하고 있습니다. 
                        새로운 기술을 배우고 적용하는 것을 즐기며, 클린 코드와 효율적인 아키텍처 설계에도 높은 관심을 가지고 있습니다.
                    </p>
                    <div class="skills">
                        <h3>주요 기술</h3>
                        <div class="skill-tags">
                            <span class="skill-tag">React</span>
                            <span class="skill-tag">HTML/CSS</span>
                            <span class="skill-tag">JavaScript</span>
                            <span class="skill-tag">Java</span>
                            <span class="skill-tag">SpringBoot</span>
                            <span class="skill-tag">Python</span>
                            <span class="skill-tag">MySQL</span>
                            <span class="skill-tag">Node.js</span>
                            <span class="skill-tag">AWS</span>
                            <span class="skill-tag">Docker</span>
                            <span class="skill-tag">GitHub</span>
                            <span class="skill-tag">Linux</span>
                        </div>
                    </div>
                </div>
                <div class="about-stats">
                    <div class="stat-item">
                        <h4>1+</h4>
                        <p>Year Learning</p>
                    </div>
                    <div class="stat-item">
                        <h4>5+</h4>
                        <p>Projects</p>
                    </div>
                    <div class="stat-item">
                        <h4>지속</h4>
                        <p>학습 중</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Portfolio Section -->
    <section id="portfolio" class="portfolio">
        <div class="container">
            <div class="section-header">
                <h2>포트폴리오</h2>
                <div class="underline"></div>
            </div>
            <div class="portfolio-grid" id="portfolioGrid">
                <!-- 동적으로 로드됨 -->
            </div>
        </div>
    </section>

    <!-- Career Section -->
    <section id="career" class="career">
        <div class="container">
            <div class="section-header">
                <h2>직업 소개</h2>
                <div class="underline"></div>
            </div>
            <div class="career-timeline">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h3>개발자 교육 과정</h3>
                        <p class="company">웹 개발 부트캠프</p>
                        <p class="date">2024 - 현재</p>
                        <p class="description">
                            HTML/CSS/JavaScript부터 React, Node.js까지 
                            풀스택 웹 개발을 체계적으로 학습 중
                        </p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h3>팀 프로젝트 경험</h3>
                        <p class="company">부트캠프 팀 프로젝트</p>
                        <p class="date">2024</p>
                        <p class="description">
                            팀과 협업하여 실제 서비스 구현,
                            커뮤니케이션과 협업의 중요성 학습
                        </p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h3>포트폴리오 프로젝트</h3>
                        <p class="company">개인 프로젝트</p>
                        <p class="date">2024</p>
                        <p class="description">
                            포트폴리오 웹사이트 직접 설계 및 구현,
                            배포와 버전 관리 경험 보유
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="projects">
        <div class="container">
            <div class="section-header">
                <h2>개발 프로젝트</h2>
                <div class="underline"></div>
            </div>
            <div class="projects-grid">
                <div class="project-card">
                    <div class="project-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h3>실시간 채팅</h3>
                    <p>WebSocket 기반의 실시간 다중 사용자 채팅 시스템</p>
                </div>

                <div class="project-card">
                    <div class="project-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <h3>전자상거래</h3>
                    <p>결제 시스템이 통합된 온라인 쇼핑 플랫폼</p>
                </div>

                <div class="project-card">
                    <div class="project-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3>블로그 시스템</h3>
                    <p>콘텐츠 관리 시스템이 탑재된 블로그 플랫폼</p>
                </div>

                <div class="project-card">
                    <div class="project-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3>데이터 대시보드</h3>
                    <p>실시간 데이터 시각화 및 분석 대시보드</p>
                </div>

                <div class="project-card">
                    <div class="project-icon">
                        <i class="fas fa-video"></i>
                    </div>
                    <h3>비디오 스트리밍</h3>
                    <p>온디맨드 비디오 스트리밍 플랫폼</p>
                </div>

                <div class="project-card">
                    <div class="project-icon">
                        <i class="fas fa-map"></i>
                    </div>
                    <h3>위치 기반 서비스</h3>
                    <p>지도 기반 위치 추적 및 공유 서비스</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <div class="section-header">
                <h2>연락 주세요</h2>
                <div class="underline"></div>
            </div>
            <div class="contact-content">
                <p>함께 성장할 수 있는 기회가 있다면 
                   언제든지 연락 주세요!</p>
                
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <h4>이메일</h4>
                            <p>contact@myworks.com</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <h4>전화</h4>
                            <p>+82 10-1234-5678</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <h4>위치</h4>
                            <p>서울, 대한민국</p>
                        </div>
                    </div>
                </div>

                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-github"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-linkedin"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Myworks. All rights reserved.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // 드롭다운 토글
        function toggleDropdown(e) {
            e.preventDefault();
            const dropdownMenu = document.getElementById('dropdownMenu');
            dropdownMenu.classList.toggle('show');
        }

        // 문서 클릭 시 드롭다운 닫기
        document.addEventListener('click', (e) => {
            const authDropdown = document.getElementById('authDropdown');
            if (authDropdown && !authDropdown.contains(e.target)) {
                document.getElementById('dropdownMenu').classList.remove('show');
            }
        });

        let loginStatusCheckAttempts = 0;
        const MAX_ATTEMPTS = 20;  // 최대 10초 (500ms * 20회) 재시도

        // 로그인 상태 확인
        async function checkLoginStatus() {
            try {
                const response = await fetch('/api/status');
                const data = await response.json();
                
                const loginItem = document.getElementById('loginItem');
                const signupItem = document.getElementById('signupItem');
                const authDropdown = document.getElementById('authDropdown');
                
                // null 체크 추가
                if (!loginItem || !signupItem || !authDropdown) {
                    loginStatusCheckAttempts++;
                    if (loginStatusCheckAttempts < MAX_ATTEMPTS) {
                        console.warn('Navigation elements not found, retrying... (' + loginStatusCheckAttempts + '/' + MAX_ATTEMPTS + ')');
                        setTimeout(checkLoginStatus, 500);
                    } else {
                        console.error('Navigation elements not found after max retries. navbar-loader may have failed.');
                    }
                    return;
                }
                
                if (data.isLoggedIn) {
                    loginItem.style.display = 'none';
                    signupItem.style.display = 'none';
                    authDropdown.style.display = 'block';
                    
                    // Load user info
                    try {
                        const userRes = await fetch('/api/user-info');
                        if (userRes.ok) {
                            const user = await userRes.json();
                            const dropdownName = document.getElementById('dropdownName');
                            if (dropdownName) {
                                dropdownName.textContent = user.full_name || user.username;
                            }
                        }
                    } catch (error) {
                        console.error('Failed to load user info:', error);
                    }
                } else {
                    loginItem.style.display = 'block';
                    signupItem.style.display = 'block';
                    authDropdown.style.display = 'none';
                }
            } catch (error) {
                console.error('Failed to check login status:', error);
            }
        }

        // 회원 정보 수정 모달 열기
        function openUserEdit(e) {
            e.preventDefault();
            document.getElementById('dropdownMenu').classList.remove('show');
            window.location.href = '/profile';
        }

        function logout(e) {
            e.preventDefault();
            fetch('/logout', { method: 'POST' })
                .then(res => res.json())
                .then(data => {
                    if (data.success) {
                        window.location.href = data.redirect;
                    }
                })
                .catch(err => console.error('Logout failed:', err));
        }

        // 페이지 로드 시 로그인 상태 확인 (navbar-loader가 완료될 때까지 대기)
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(checkLoginStatus, 2000);  // 2초 대기
            });
        } else {
            setTimeout(checkLoginStatus, 2000);  // 2초 대기
        }
    </script>

    <script>
        // 포트폴리오 데이터 로드
        async function loadPortfolios() {
            try {
                const response = await fetch('/api/portfolio');
                const portfolios = await response.json();
                const grid = document.getElementById('portfolioGrid');
                
                grid.innerHTML = portfolios.map(p => `
                    <div class="portfolio-item">
                        <div class="portfolio-image" style="background-image: ${p.image ? `url('${p.image}')` : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'}; background-size: cover; background-position: center;">
                            <div class="portfolio-overlay">
                                <a href="#" class="portfolio-link">자세히 보기</a>
                            </div>
                        </div>
                        <div class="portfolio-info">
                            <h3>${p.title}</h3>
                            <p>${p.description}</p>
                            <div class="portfolio-tags">
                                ${p.tags.map(tag => `<span>${tag}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('포트폴리오 로드 중 오류:', error);
            }
        }
        
        // 페이지 로드 후 포트폴리오 로드
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadPortfolios);
        } else {
            loadPortfolios();
        }
    </script>
</body>
</html>
