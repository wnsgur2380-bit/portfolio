<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>회원가입</title>

	<link rel="stylesheet" type="text/css" th:href="@{/bootstrap.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/style.css}">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body class="bg-light">

	<div class="container d-flex align-items-center" style="min-height: 100vh;">
			<div class="row w-100 align-items-center">

				<div class="col-md-7 text-center d-none d-md-block">
					<a class="navbar-brand fw-bold d-inline-block" th:href="@{/mainpage}">
						<img src="https://raw.githubusercontent.com/jhjeong2380/jh/main/logo_lms4.png" alt="입트영 로고"
							style="height: 400px;">
					</a>
				</div>

				<div class="col-md-5">
				<div class="card shadow-sm border-0 p-4" style="background-color:#f0f0f0; margin-top: 30px; margin-bottom: 30px;">
					<div class="card-body">

						<div th:if="${msg}" class="alert alert-success" role="alert">
							<span th:text="${msg}"></span>
						</div>
						<h5 class="fw-bold text-center mb-3 text-black">입트영으로 입트자...!</h5>

						<div class="d-flex justify-content-center mb-4">
							<div class="d-flex bg-white px-5 p-1 rounded-pill">
								<a th:href="@{/user/login}" class="btn ms-2 btn-sm">로그인</a>
								<a th:href="@{/user/signup}" class="btn btn-dark rounded-pill me-2 btn-sm">회원가입</a>
							</div>
						</div>

						<form th:action="@{/user/signup}" th:object="${userForm}" method="post">
							
							<div th:replace="~{form_errors :: formErrorsFragment}"></div>
							
							<div class="mb-3">
								<label for="userid" class="form-label fw-bold ms-3">회원 ID</label>
								<input type="text" class="form-control rounded-pill p-3"
									th:field="*{userId}" placeholder="ID를 입력해주세요."
									th:classappend="${#fields.hasErrors('userId')} ? 'is-invalid' : ''">
								<div class="invalid-feedback ps-3" 
									 th:if="${#fields.hasErrors('userId')}" 
									 th:errors="*{userId}">
								</div>
							</div>

							<div class="mb-3">
								<label for="password" class="form-label fw-bold ms-3">비밀번호</label>
								<input type="password" class="form-control rounded-pill p-3"
									th:field="*{password}" placeholder="비밀번호를 입력해주세요."
									th:classappend="${#fields.hasErrors('password')} ? 'is-invalid' : ''">
								<div id="passwordHelp" class="form-text small text-muted ms-3">
									8~16자, 대/소문자, 숫자, 특수문자(!@#$%^&*)를 최소 1개씩 포함해야 합니다.
								</div>
								<div class="invalid-feedback ps-3" 
									 th:if="${#fields.hasErrors('password')}" 
									 th:errors="*{password}">
								</div>
							</div>

							<div class="mb-3">
								<label for="password_confirm" class="form-label fw-bold ms-3">비밀번호 확인</label>
								<input type="password" class="form-control rounded-pill p-3"
									th:field="*{password1}" placeholder="비밀번호를 다시 입력해주세요."
									th:classappend="${#fields.hasErrors('password1')} ? 'is-invalid' : ''">
								
								<div class="invalid-feedback ps-3" 
									 th:if="${#fields.hasErrors('password1')}">
									 <div th:each="err : ${#fields.errors('password1')}">
										 <span th:if="${#strings.contains(err, '일치하지 않습니다')}" th:text="${err}"></span>
										 <span th:if="${#strings.contains(err, '필수입니다.')}" th:text="${err}"></span>
									 </div>
								</div>
								</div>

							<div class="mb-3">
								<label for="username" class="form-label fw-bold ms-3">이름</label>
								<input type="text" class="form-control rounded-pill p-3"
									th:field="*{userName}" placeholder="이름을 입력해주세요."
									th:classappend="${#fields.hasErrors('userName')} ? 'is-invalid' : ''">
								<div class="invalid-feedback ps-3" 
									 th:if="${#fields.hasErrors('userName')}" 
									 th:errors="*{userName}">
								</div>
							</div>

							<div class="mb-4">
								<label for="email" class="form-label fw-bold ms-3">이메일</label>
								<input type="email" class="form-control rounded-pill p-3"
									th:field="*{email}" placeholder="이메일 주소를 입력해주세요."
									th:classappend="${#fields.hasErrors('email')} ? 'is-invalid' : ''">
								<div class="invalid-feedback ps-3" 
									 th:if="${#fields.hasErrors('email')}" 
									 th:errors="*{email}">
								</div>
							</div>

							<div class="mb-4">
								<label for="role" class="form-label fw-bold ms-3">역할</label>
								<select class="form-select rounded-pill p-3" th:field="*{role}">
									<option value="ROLE_LEARNER">수강자</option>
									<option value="ROLE_INSTRUCTOR">강사</option>
								</select>
							</div>

							<div class="d-grid mt-5">
								<button type="submit" class="btn btn-dark rounded-pill btn-lg p-3">회원가입</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
</body>

</html>