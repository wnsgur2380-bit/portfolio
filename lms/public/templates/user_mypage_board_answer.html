<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout}">

<head>
	<title>마이페이지 - 내 답글</title>
</head>

<body>
	<th:block layout:fragment="content">

		<div class="container my-4">
			<div class="row g-4">
				<form th:action="@{/question/my}" method="get" id="searchForm">
				    <input type="hidden" id="page" name="page" th:value="${paging.number}">
				</form>
				<div class="col-lg-3">
                    <h4 class="mb-3 fw-bold">마이페이지</h4>
                    <div class="list-group">
                        <a th:href="@{/enrollment/user(status='active')}"
                            class="list-group-item list-group-item-action">신청강좌</a>
                        <a th:href="@{/enrollment/user(status='completed')}"
                            class="list-group-item list-group-item-action">완료강좌</a>
                        <a th:href="@{/question/my}" class="list-group-item list-group-item-action">내 질문</a>
                        <a th:href="@{/answer/my}" class="list-group-item list-group-item-action active"
                            aria-current="true">내 답글</a>
                        <a th:href="@{/user/modify}" class="list-group-item list-group-item-action">내 정보 수정</a>
						<a th:href="@{/api/payments/membership}" class="list-group-item list-group-item-action text-warning" th:if="${!user.isPaid}">
						    <i class="bi bi-credit-card me-2"></i>멤버십 업그레이드
						</a>
                    </div>
                </div>

				<div class="col-lg-9">

					<h4 class="mb-3 fw-bold">내 답글 목록</h4>

					<table class="table table-hover align-middle">
                        <thead class="table-light">
                            <tr>
                                <th scope="col" style="width: 20%;">강의명</th>
                                <th scope="col" style="width: 15%;">강의 레벨</th> 
                                <th scope="col" style="width: 25%;">질문 제목</th> 
                                <th scope="col" style="width: 25%;">답변 내용</th> 
                                <th scope="col" style="width: 15%;" class="text-center">작성일</th>
                            </tr>
                        </thead>
						<tbody>
                            <tr th:each="answer : ${paging.content}">
								<td th:text="${answer.question.classes.title}"></td>
								<td>
									<span class="badge" 
										  th:if="${answer.question.classes.level != null}"
										  th:text="${answer.question.classes.level.levelName}"
										  th:classappend="|badge ${
											answer.question.classes.level.levelId == 1 ? 'bg-info' : 
											answer.question.classes.level.levelId == 2 ? 'bg-primary' : 'bg-danger'
											}|"></span>
									<span th:if="${answer.question.classes.level == null}" class="badge bg-secondary">N/A</span>
								</td>
								<td th:text="${answer.question.title}"></td>
								<td>
									<a th:href="@{|/question/detail/${answer.question.boardQuesId}|}"
										th:text="${answer.answContent}" class="text-decoration-none">
									</a>
								</td>
								<td class="text-center" th:text="${#temporals.format(answer.answDate, 'YYYY/MM/dd hh:ss')}"></td>
							</tr>
						</tbody>
					</table>

                    <div th:if="${!paging.hasContent()}" class="text-center p-5">
						<span class="text-muted">작성한 답글이 없습니다.</span>
					</div>
                    
                    <div th:replace="~{pagination :: paging(${paging})}"></div>

				</div>
			</div>
		</div>
	</th:block>
</body>
</html>